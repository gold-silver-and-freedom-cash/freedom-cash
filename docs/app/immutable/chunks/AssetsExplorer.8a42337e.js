import{s as ke,f as g,a as A,l as z,g as L,h as Q,c as M,z as P,m as K,d as m,j as w,i as v,v as S,n as ue,J as x,H as ne,e as J,E as ie,C as U,F as X,D as R,G as we,o as Le,A as Ie}from"./scheduler.e76b12a0.js";import{S as Te,i as Ce,g as ee,t as N,c as te,a as D,b as se,d as re,m as ae,e as oe}from"./index.8ff76f30.js";import{e as ce}from"./each.e59479a4.js";import{f as He,d as Ae,e as Me,g as Be}from"./constants.1154adc2.js";import{b as fe,C as pe,r as Y,g as Z,d as $}from"./helpers.1109ecba.js";import{M as ge}from"./Map.6ddebe90.js";function Pe(u){let e,i=Y(u[0].text)+"",l,t=Z([u[0]]).length>0,o,a,n=t&&_e(u);return{c(){e=new ne(!1),l=A(),n&&n.c(),o=J(),this.h()},l(s){e=ie(s,!1),l=M(s),n&&n.l(s),o=J(),this.h()},h(){e.a=l},m(s,r){e.m(i,s,r),v(s,l,r),n&&n.m(s,r),v(s,o,r),a=!0},p(s,r){(!a||r&1)&&i!==(i=Y(s[0].text)+"")&&e.p(i),r&1&&(t=Z([s[0]]).length>0),t?n?(n.p(s,r),r&1&&D(n,1)):(n=_e(s),n.c(),D(n,1),n.m(o.parentNode,o)):n&&(ee(),N(n,1,1,()=>{n=null}),te())},i(s){a||(D(n),a=!0)},o(s){N(n),a=!1},d(s){s&&(e.d(),m(l),m(o)),n&&n.d(s)}}}function Ve(u){let e,i=Y($(u[0].text,u[0].imageLink))+"",l,t,o="<br/>",a,n,s;return n=new ge({props:{projectID:u[0].projectID,pois:Z([u[0]]),contract:u[1]}}),{c(){e=new ne(!1),l=A(),t=g("p"),t.innerHTML=o,a=A(),se(n.$$.fragment),this.h()},l(r){e=ie(r,!1),l=M(r),t=L(r,"P",{"data-svelte-h":!0}),P(t)!=="svelte-pntvnr"&&(t.innerHTML=o),a=M(r),re(n.$$.fragment,r),this.h()},h(){e.a=l},m(r,c){e.m(i,r,c),v(r,l,c),v(r,t,c),v(r,a,c),ae(n,r,c),s=!0},p(r,c){(!s||c&1)&&i!==(i=Y($(r[0].text,r[0].imageLink))+"")&&e.p(i);const p={};c&1&&(p.projectID=r[0].projectID),c&1&&(p.pois=Z([r[0]])),c&2&&(p.contract=r[1]),n.$set(p)},i(r){s||(D(n.$$.fragment,r),s=!0)},o(r){N(n.$$.fragment,r),s=!1},d(r){r&&(e.d(),m(l),m(t),m(a)),oe(n,r)}}}function ye(u){let e,i=Y($(u[0].text,u[0].embedLink))+"",l,t,o="<br/>",a,n,s,r;return{c(){e=new ne(!1),l=A(),t=g("p"),t.innerHTML=o,a=A(),n=g("div"),s=g("object"),this.h()},l(c){e=ie(c,!1),l=M(c),t=L(c,"P",{"data-svelte-h":!0}),P(t)!=="svelte-pntvnr"&&(t.innerHTML=o),a=M(c),n=L(c,"DIV",{class:!0});var p=Q(n);s=L(p,"OBJECT",{title:!0,data:!0,class:!0});var b=Q(s);b.forEach(m),p.forEach(m),this.h()},h(){e.a=l,w(s,"title","super"),w(s,"data",r=u[0].embedLink),w(s,"class","svelte-1u5dwth"),w(n,"class","embedVideo svelte-1u5dwth")},m(c,p){e.m(i,c,p),v(c,l,p),v(c,t,p),v(c,a,p),v(c,n,p),S(n,s)},p(c,p){p&1&&i!==(i=Y($(c[0].text,c[0].embedLink))+"")&&e.p(i),p&1&&r!==(r=c[0].embedLink)&&w(s,"data",r)},i:U,o:U,d(c){c&&(e.d(),m(l),m(t),m(a),m(n))}}}function _e(u){let e,i;return e=new ge({props:{projectID:u[0].projectID,pois:Z([u[0]]),contract:u[1]}}),{c(){se(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,t){ae(e,l,t),i=!0},p(l,t){const o={};t&1&&(o.projectID=l[0].projectID),t&1&&(o.pois=Z([l[0]])),t&2&&(o.contract=l[1]),e.$set(o)},i(l){i||(D(e.$$.fragment,l),i=!0)},o(l){N(e.$$.fragment,l),i=!1},d(l){oe(e,l)}}}function De(u){let e,i="<br/>",l,t,o,a,n="<br/>",s,r,c=u[0].reconciliationFrom<new Date().getTime()/1e3&&u[3]==null&&(u[0].upVoteScore>0||u[0].downVoteScore>0),p,b,h,f=u[3]>0&&me(u),k=c&&de(u);return{c(){e=g("p"),e.innerHTML=i,l=A(),t=g("input"),o=A(),a=g("p"),a.innerHTML=n,s=A(),f&&f.c(),r=A(),k&&k.c(),p=J(),this.h()},l(_){e=L(_,"P",{"data-svelte-h":!0}),P(e)!=="svelte-pntvnr"&&(e.innerHTML=i),l=M(_),t=L(_,"INPUT",{class:!0,type:!0,placeholder:!0,min:!0,max:!0,step:!0}),o=M(_),a=L(_,"P",{"data-svelte-h":!0}),P(a)!=="svelte-pntvnr"&&(a.innerHTML=n),s=M(_),f&&f.l(_),r=M(_),k&&k.l(_),p=J(),this.h()},h(){w(t,"class","myInputField"),w(t,"type","number"),w(t,"placeholder","... enter investment amount ..."),w(t,"min","1"),w(t,"max","369"),w(t,"step","1")},m(_,I){v(_,e,I),v(_,l,I),v(_,t,I),X(t,u[3]),v(_,o,I),v(_,a,I),v(_,s,I),f&&f.m(_,I),v(_,r,I),k&&k.m(_,I),v(_,p,I),b||(h=R(t,"input",u[10]),b=!0)},p(_,I){I&8&&x(t.value)!==_[3]&&X(t,_[3]),_[3]>0?f?f.p(_,I):(f=me(_),f.c(),f.m(r.parentNode,r)):f&&(f.d(1),f=null),I&9&&(c=_[0].reconciliationFrom<new Date().getTime()/1e3&&_[3]==null&&(_[0].upVoteScore>0||_[0].downVoteScore>0)),c?k?k.p(_,I):(k=de(_),k.c(),k.m(p.parentNode,p)):k&&(k.d(1),k=null)},d(_){_&&(m(e),m(l),m(t),m(o),m(a),m(s),m(r),m(p)),f&&f.d(_),k&&k.d(_),b=!1,h()}}}function Oe(u){let e,i="<br/>",l,t,o,a,n="<br/>",s,r,c,p,b=u[2]>0&&he(u);return{c(){e=g("p"),e.innerHTML=i,l=A(),t=g("input"),o=A(),a=g("p"),a.innerHTML=n,s=A(),b&&b.c(),r=J(),this.h()},l(h){e=L(h,"P",{"data-svelte-h":!0}),P(e)!=="svelte-pntvnr"&&(e.innerHTML=i),l=M(h),t=L(h,"INPUT",{class:!0,type:!0,placeholder:!0,min:!0,max:!0,step:!0}),o=M(h),a=L(h,"P",{"data-svelte-h":!0}),P(a)!=="svelte-pntvnr"&&(a.innerHTML=n),s=M(h),b&&b.l(h),r=J(),this.h()},h(){w(t,"class","myInputField"),w(t,"type","number"),w(t,"placeholder","... enter donation amount ..."),w(t,"min","1"),w(t,"max","369"),w(t,"step","1")},m(h,f){v(h,e,f),v(h,l,f),v(h,t,f),X(t,u[2]),v(h,o,f),v(h,a,f),v(h,s,f),b&&b.m(h,f),v(h,r,f),c||(p=R(t,"input",u[8]),c=!0)},p(h,f){f&4&&x(t.value)!==h[2]&&X(t,h[2]),h[2]>0?b?b.p(h,f):(b=he(h),b.c(),b.m(r.parentNode,r)):b&&(b.d(1),b=null)},d(h){h&&(m(e),m(l),m(t),m(o),m(a),m(s),m(r)),b&&b.d(h),c=!1,p()}}}function me(u){let e,i="Appreciate",l,t,o="<br/>",a,n,s="Depreciate",r,c,p="<br/>",b,h;return{c(){e=g("button"),e.textContent=i,l=A(),t=g("p"),t.innerHTML=o,a=A(),n=g("button"),n.textContent=s,r=A(),c=g("p"),c.innerHTML=p,this.h()},l(f){e=L(f,"BUTTON",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-14js5mh"&&(e.textContent=i),l=M(f),t=L(f,"P",{"data-svelte-h":!0}),P(t)!=="svelte-pntvnr"&&(t.innerHTML=o),a=M(f),n=L(f,"BUTTON",{class:!0,"data-svelte-h":!0}),P(n)!=="svelte-i3r496"&&(n.textContent=s),r=M(f),c=L(f,"P",{"data-svelte-h":!0}),P(c)!=="svelte-pntvnr"&&(c.innerHTML=p),this.h()},h(){w(e,"class","inside"),w(n,"class","inside")},m(f,k){v(f,e,k),v(f,l,k),v(f,t,k),v(f,a,k),v(f,n,k),v(f,r,k),v(f,c,k),b||(h=[R(e,"click",u[11]),R(n,"click",u[12])],b=!0)},p:U,d(f){f&&(m(e),m(l),m(t),m(a),m(n),m(r),m(c)),b=!1,we(h)}}}function de(u){let e,i="Reconcile",l,t;return{c(){e=g("button"),e.textContent=i,this.h()},l(o){e=L(o,"BUTTON",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-1xo9ajr"&&(e.textContent=i),this.h()},h(){w(e,"class","inside")},m(o,a){v(o,e,a),l||(t=R(e,"click",u[13]),l=!0)},p:U,d(o){o&&m(e),l=!1,t()}}}function he(u){let e,i="Donate",l,t;return{c(){e=g("button"),e.textContent=i,this.h()},l(o){e=L(o,"BUTTON",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-nciw23"&&(e.textContent=i),this.h()},h(){w(e,"class","inside")},m(o,a){v(o,e,a),l||(t=R(e,"click",u[9]),l=!0)},p:U,d(o){o&&m(e),l=!1,t()}}}function Se(u){let e,i,l,t,o,a="<br/>",n,s,r,c=u[0].upVoteScore+"",p,b,h,f,k=u[0].downVoteScore+"",_,I,d,C,B,W="<br/><br/>",y;const O=[ye,Ve,Pe],V=[];function E(T,H){return T[0].embedLink!==""?0:T[0].imageLink!==""?1:2}i=E(u),l=V[i]=O[i](u);function F(T,H){return T[0].reconciled?Oe:De}let G=F(u),j=G(u);return{c(){e=g("div"),l.c(),t=A(),o=g("p"),o.innerHTML=a,n=A(),s=g("span"),r=z("Ups: "),p=z(c),b=z(` vs.
	`),h=g("span"),f=z("Downs: "),_=z(k),I=A(),j.c(),C=A(),B=g("p"),B.innerHTML=W,this.h()},l(T){e=L(T,"DIV",{class:!0});var H=Q(e);l.l(H),t=M(H),o=L(H,"P",{"data-svelte-h":!0}),P(o)!=="svelte-pntvnr"&&(o.innerHTML=a),n=M(H),s=L(H,"SPAN",{class:!0});var q=Q(s);r=K(q,"Ups: "),p=K(q,c),q.forEach(m),b=K(H,` vs.
	`),h=L(H,"SPAN",{class:!0});var le=Q(h);f=K(le,"Downs: "),_=K(le,k),le.forEach(m),I=M(H),j.l(H),H.forEach(m),C=M(T),B=L(T,"P",{"data-svelte-h":!0}),P(B)!=="svelte-5q9igk"&&(B.innerHTML=W),this.h()},h(){w(s,"class","score-up svelte-1u5dwth"),w(h,"class","score-down svelte-1u5dwth"),w(e,"class",d="card "+(u[0].reconciled?"reconciled":"open")+" svelte-1u5dwth")},m(T,H){v(T,e,H),V[i].m(e,null),S(e,t),S(e,o),S(e,n),S(e,s),S(s,r),S(s,p),S(e,b),S(e,h),S(h,f),S(h,_),S(e,I),j.m(e,null),v(T,C,H),v(T,B,H),y=!0},p(T,[H]){let q=i;i=E(T),i===q?V[i].p(T,H):(ee(),N(V[q],1,1,()=>{V[q]=null}),te(),l=V[i],l?l.p(T,H):(l=V[i]=O[i](T),l.c()),D(l,1),l.m(e,t)),(!y||H&1)&&c!==(c=T[0].upVoteScore+"")&&ue(p,c),(!y||H&1)&&k!==(k=T[0].downVoteScore+"")&&ue(_,k),G===(G=F(T))&&j?j.p(T,H):(j.d(1),j=G(T),j&&(j.c(),j.m(e,null))),(!y||H&1&&d!==(d="card "+(T[0].reconciled?"reconciled":"open")+" svelte-1u5dwth"))&&w(e,"class",d)},i(T){y||(D(l),y=!0)},o(T){N(l),y=!1},d(T){T&&(m(e),m(C),m(B)),V[i].d(),j.d()}}}function je(u,e,i){let{asset:l}=e,{contract:t}=e,{provider:o}=e,{publicWalletAddressOfVisitor:a}=e,n,s=!0,r;async function c(d,C){const B=fe(r.toString()),W=await o.getSigner(),O=await new pe(He,Ae,W).getBuyPrice(B),V=BigInt(r)*O,E=BigInt(await o.getBalance(a));try{const G=await t.appreciateAsset.estimateGas(d,B,O,{value:BigInt(V)})*(await o.getFeeData()).gasPrice;if(E<V+BigInt(G))throw new Error("you might enter a smaller amount");C?(console.log(d,B,O),await t.appreciateAsset(d,B,O,{value:BigInt(V)})):await t.depreciateAsset(d,B,O,{value:BigInt(V)}),s=!1}catch(F){alert(F)}}async function p(d){const C=await o.getSigner(),B=new pe(Me,Be,C),W=fe(n.toString()),y=await B.getBuyPrice(W),O=BigInt(n)*y,V=BigInt(await o.getBalance(a)),E=await t.assetCreators(d);try{const G=await B.donate.estimateGas(E,W,y,{value:BigInt(O)})*(await o.getFeeData()).gasPrice;V<O+BigInt(G)?alert("you might enter a smaller amount"):(console.log(`donating to ${E} ${W} ${y}`),await B.donate(E,W,y,{value:BigInt(O)}))}catch(F){alert(F.message)}}function b(){n=x(this.value),i(2,n)}const h=()=>p(l.id);function f(){r=x(this.value),i(3,r)}const k=()=>c(l.id,!0),_=()=>c(l.id,!1),I=()=>t.reconcile(l.id);return u.$$set=d=>{"asset"in d&&i(0,l=d.asset),"contract"in d&&i(1,t=d.contract),"provider"in d&&i(6,o=d.provider),"publicWalletAddressOfVisitor"in d&&i(7,a=d.publicWalletAddressOfVisitor)},[l,t,n,r,c,p,o,a,b,h,f,k,_,I]}class Ne extends Te{constructor(e){super(),Ce(this,e,je,Se,ke,{asset:0,contract:1,provider:6,publicWalletAddressOfVisitor:7})}}function ve(u,e,i){const l=u.slice();return l[11]=e[i],l[13]=i,l}function We(u){let e;return{c(){e=z("... loading data from blockchain ...")},l(i){e=K(i,"... loading data from blockchain ...")},m(i,l){v(i,e,l)},p:U,i:U,o:U,d(i){i&&m(e)}}}function Ee(u){let e,i,l=ce(u[5]),t=[];for(let a=0;a<l.length;a+=1)t[a]=be(ve(u,l,a));const o=a=>N(t[a],1,1,()=>{t[a]=null});return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=J()},l(a){for(let n=0;n<t.length;n+=1)t[n].l(a);e=J()},m(a,n){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(a,n);v(a,e,n),i=!0},p(a,n){if(n&39){l=ce(a[5]);let s;for(s=0;s<l.length;s+=1){const r=ve(a,l,s);t[s]?(t[s].p(r,n),D(t[s],1)):(t[s]=be(r),t[s].c(),D(t[s],1),t[s].m(e.parentNode,e))}for(ee(),s=l.length;s<t.length;s+=1)o(s);te()}},i(a){if(!i){for(let n=0;n<l.length;n+=1)D(t[n]);i=!0}},o(a){t=t.filter(Boolean);for(let n=0;n<t.length;n+=1)N(t[n]);i=!1},d(a){a&&m(e),Ie(t,a)}}}function be(u){let e,i;return e=new Ne({props:{asset:u[11],contract:u[0],provider:u[2],publicWalletAddressOfVisitor:u[1]}}),{c(){se(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,t){ae(e,l,t),i=!0},p(l,t){const o={};t&32&&(o.asset=l[11]),t&1&&(o.contract=l[0]),t&4&&(o.provider=l[2]),t&2&&(o.publicWalletAddressOfVisitor=l[1]),e.$set(o)},i(l){i||(D(e.$$.fragment,l),i=!0)},o(l){N(e.$$.fragment,l),i=!1},d(l){oe(e,l)}}}function Fe(u){let e,i="<br/><br/>",l,t,o,a,n="<br/>",s,r,c,p,b,h,f;const k=[Ee,We],_=[];function I(d,C){return d[6]?0:1}return c=I(u),p=_[c]=k[c](u),{c(){e=g("p"),e.innerHTML=i,l=A(),t=g("input"),o=A(),a=g("p"),a.innerHTML=n,s=A(),r=g("div"),p.c(),this.h()},l(d){e=L(d,"P",{"data-svelte-h":!0}),P(e)!=="svelte-1kkzk3g"&&(e.innerHTML=i),l=M(d),t=L(d,"INPUT",{class:!0,type:!0,placeholder:!0}),o=M(d),a=L(d,"P",{"data-svelte-h":!0}),P(a)!=="svelte-pntvnr"&&(a.innerHTML=n),s=M(d),r=L(d,"DIV",{class:!0});var C=Q(r);p.l(C),C.forEach(m),this.h()},h(){w(t,"class","myInputField"),w(t,"type","text"),w(t,"placeholder",u[3]),t.autofocus=!0,w(r,"class","assets svelte-1t5v6hi")},m(d,C){v(d,e,C),v(d,l,C),v(d,t,C),X(t,u[4]),v(d,o,C),v(d,a,C),v(d,s,C),v(d,r,C),_[c].m(r,null),b=!0,t.focus(),h||(f=[R(t,"input",u[9]),R(t,"keydown",u[7])],h=!0)},p(d,[C]){(!b||C&8)&&w(t,"placeholder",d[3]),C&16&&t.value!==d[4]&&X(t,d[4]);let B=c;c=I(d),c===B?_[c].p(d,C):(ee(),N(_[B],1,1,()=>{_[B]=null}),te(),p=_[c],p?p.p(d,C):(p=_[c]=k[c](d),p.c()),D(p,1),p.m(r,null))},i(d){b||(D(p),b=!0)},o(d){N(p),b=!1},d(d){d&&(m(e),m(l),m(t),m(o),m(a),m(s),m(r)),_[c].d(),h=!1,we(f)}}}function Ge(u,e,i){let{contract:l}=e,{publicWalletAddressOfVisitor:t}=e,{provider:o}=e,{placeHolderText:a="... filter ..."}=e,{assets:n=[]}=e,s="",r=[],c=!1,p=!1;Le(async()=>{i(6,c=!1),i(5,r=[...n]),i(6,c=!0)});const b=()=>{i(5,r=[...n]),p===!1&&(p=!0,setTimeout(()=>{const f=[];for(const k of r)JSON.stringify(k).toLowerCase().indexOf(s.toLowerCase())!==-1&&f.push(k);i(5,r=[...f]),p=!1},1e3*1))};function h(){s=this.value,i(4,s)}return u.$$set=f=>{"contract"in f&&i(0,l=f.contract),"publicWalletAddressOfVisitor"in f&&i(1,t=f.publicWalletAddressOfVisitor),"provider"in f&&i(2,o=f.provider),"placeHolderText"in f&&i(3,a=f.placeHolderText),"assets"in f&&i(8,n=f.assets)},[l,t,o,a,s,r,c,b,n,h]}class Qe extends Te{constructor(e){super(),Ce(this,e,Ge,Fe,ke,{contract:0,publicWalletAddressOfVisitor:1,provider:2,placeHolderText:3,assets:8})}}export{Qe as A};
